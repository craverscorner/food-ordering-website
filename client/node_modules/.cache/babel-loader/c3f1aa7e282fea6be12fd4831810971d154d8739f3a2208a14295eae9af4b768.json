{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Tabs,Tab,Box,Typography,Button,Paper}from'@mui/material';import{useMenu}from'../context/MenuContext';import{useCart}from'../context/CartContext';import{useNavigate}from'react-router-dom';import{debounce}from'lodash';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Home=()=>{const{menuItems,categories,getItemsForCategory,menuItemCategories,menuItemSubcategories,categorySubcategoryLinks}=useMenu();const{cart,addToCart,updateQuantity,removeFromCart}=useCart();const[selectedCategory,setSelectedCategory]=useState(null);const navigate=useNavigate();// Only show categories (type === 'category')\nconst mainCategories=categories.filter(cat=>cat.type==='category');useEffect(()=>{if(mainCategories.length>0&&!selectedCategory){setSelectedCategory(mainCategories[0].id);}},[mainCategories,selectedCategory]);// Get items for selected category using join table\nconst items=selectedCategory?getItemsForCategory(selectedCategory):[];// Get subcategories for the selected category using the join table from context\nconst categorySubcategoryIds=categorySubcategoryLinks.filter(link=>String(link.category_id)===String(selectedCategory)).map(link=>link.subcategory_id);const categorySubcategories=categories.filter(cat=>cat.type==='subcategory'&&categorySubcategoryIds.includes(cat.id)).sort((a,b)=>{var _a$sort_order,_b$sort_order;return((_a$sort_order=a.sort_order)!==null&&_a$sort_order!==void 0?_a$sort_order:0)-((_b$sort_order=b.sort_order)!==null&&_b$sort_order!==void 0?_b$sort_order:0);});// Group items by subcategory (support multiple subcategories per item)\nconst itemsBySubcategory={};const subcategoryIdToName={};categorySubcategories.forEach(sub=>{subcategoryIdToName[sub.id]=sub.name;});items.forEach(item=>{// Find all subcategory links for this item that belong to the current category's subcategories\nconst subLinks=menuItemSubcategories.filter(link=>link.menu_item_id===item.id&&categorySubcategories.some(sub=>sub.id===link.subcategory_id));if(subLinks.length>0){subLinks.forEach(link=>{const subName=subcategoryIdToName[link.subcategory_id];if(!itemsBySubcategory[subName])itemsBySubcategory[subName]=[];// Avoid duplicates\nif(!itemsBySubcategory[subName].some(i=>i.id===item.id)){itemsBySubcategory[subName].push(item);}});}else{// No subcategory for this category, put in 'Other'\nif(!itemsBySubcategory['Other'])itemsBySubcategory['Other']=[];itemsBySubcategory['Other'].push(item);}});const debouncedSearch=debounce(query=>{/* fetch from DB */},300);// Debug output\nconst menuItemIds=menuItemCategories.filter(link=>String(link.category_id)===String(selectedCategory)).map(link=>String(link.menu_item_id));console.log('selectedCategory:',selectedCategory);console.log('menuItemCategories:',menuItemCategories);console.log('menuItemIds:',menuItemIds);console.log('items:',items);console.log('menuItems:',menuItems);return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",sx:{pb:10},children:[mainCategories.length===0||!selectedCategory?/*#__PURE__*/_jsx(Typography,{align:\"center\",color:\"text.secondary\",sx:{mt:4},children:\"No categories found.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tabs,{value:selectedCategory,onChange:(e,val)=>setSelectedCategory(val),variant:\"scrollable\",scrollButtons:\"auto\",sx:{mb:2},children:mainCategories.map(cat=>/*#__PURE__*/_jsx(Tab,{label:cat.name,value:cat.id},cat.id))}),items.length===0?/*#__PURE__*/_jsx(Typography,{align:\"center\",color:\"text.secondary\",sx:{mt:4},children:\"No items found for this category.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[categorySubcategories.map(subcategory=>{const subcategoryItems=itemsBySubcategory[subcategory.name]||[];if(subcategoryItems.length===0)return null;return/*#__PURE__*/_jsxs(Box,{sx:{mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:600,mb:2,color:'primary.main'},children:subcategory.name}),subcategoryItems.map(item=>{var _item$price;const cartItem=cart.find(ci=>ci.id===item.id);return/*#__PURE__*/_jsxs(Paper,{sx:{display:'flex',alignItems:'center',mb:2,p:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{flex:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:700},children:item.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{fontWeight:600},children:[\"\\xA3\",(_item$price=item.price)===null||_item$price===void 0?void 0:_item$price.toFixed(2)]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",noWrap:true,children:item.description})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center',ml:2},children:[item.image_url&&/*#__PURE__*/_jsx(Box,{component:\"img\",src:item.image_url,alt:item.name,sx:{width:90,height:90,objectFit:'cover',borderRadius:2,mb:1}}),cartItem&&cartItem.quantity>0?/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mt:1},children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",sx:{minWidth:32,px:0},onClick:()=>{if(cartItem.quantity===1){removeFromCart(item.id);}else{updateQuantity(item.id,cartItem.quantity-1);}},children:\"-\"}),/*#__PURE__*/_jsx(Typography,{sx:{mx:1,minWidth:20,textAlign:'center'},children:cartItem.quantity}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",sx:{minWidth:32,px:0},onClick:()=>updateQuantity(item.id,cartItem.quantity+1),children:\"+\"})]}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",sx:{mt:1,fontSize:'0.8rem',px:2,py:0.5},onClick:()=>addToCart(item),children:\"Add to Cart\"})]})]},item.id);})]},subcategory.name);}),(()=>{const otherItems=itemsBySubcategory['Other']||[];if(otherItems.length===0)return null;return/*#__PURE__*/_jsxs(Box,{sx:{mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:600,mb:2,color:'primary.main'},children:\"Other\"}),otherItems.map(item=>{var _item$price2;const cartItem=cart.find(ci=>ci.id===item.id);return/*#__PURE__*/_jsxs(Paper,{sx:{display:'flex',alignItems:'center',mb:2,p:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{flex:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:700},children:item.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{fontWeight:600},children:[\"\\xA3\",(_item$price2=item.price)===null||_item$price2===void 0?void 0:_item$price2.toFixed(2)]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",noWrap:true,children:item.description})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center',ml:2},children:[item.image_url&&/*#__PURE__*/_jsx(Box,{component:\"img\",src:item.image_url,alt:item.name,sx:{width:90,height:90,objectFit:'cover',borderRadius:2,mb:1}}),cartItem&&cartItem.quantity>0?/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mt:1},children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",sx:{minWidth:32,px:0},onClick:()=>{if(cartItem.quantity===1){removeFromCart(item.id);}else{updateQuantity(item.id,cartItem.quantity-1);}},children:\"-\"}),/*#__PURE__*/_jsx(Typography,{sx:{mx:1,minWidth:20,textAlign:'center'},children:cartItem.quantity}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outlined\",sx:{minWidth:32,px:0},onClick:()=>updateQuantity(item.id,cartItem.quantity+1),children:\"+\"})]}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",sx:{mt:1,fontSize:'0.8rem',px:2,py:0.5},onClick:()=>addToCart(item),children:\"Add to Cart\"})]})]},item.id);})]});})()]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,sx:{position:'fixed',left:0,bottom:0,width:'100vw',borderRadius:0,py:2,zIndex:1200},onClick:()=>navigate('/cart'),children:\"Go to Basket\"})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","Container","Tabs","Tab","Box","Typography","Button","Paper","useMenu","useCart","useNavigate","debounce","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","menuItems","categories","getItemsForCategory","menuItemCategories","menuItemSubcategories","categorySubcategoryLinks","cart","addToCart","updateQuantity","removeFromCart","selectedCategory","setSelectedCategory","navigate","mainCategories","filter","cat","type","length","id","items","categorySubcategoryIds","link","String","category_id","map","subcategory_id","categorySubcategories","includes","sort","a","b","_a$sort_order","_b$sort_order","sort_order","itemsBySubcategory","subcategoryIdToName","forEach","sub","name","item","subLinks","menu_item_id","some","subName","i","push","debouncedSearch","query","menuItemIds","console","log","maxWidth","sx","pb","children","align","color","mt","value","onChange","e","val","variant","scrollButtons","mb","label","subcategory","subcategoryItems","fontWeight","_item$price","cartItem","find","ci","display","alignItems","p","flex","price","toFixed","noWrap","description","flexDirection","ml","image_url","component","src","alt","width","height","objectFit","borderRadius","quantity","size","minWidth","px","onClick","mx","textAlign","fontSize","py","otherItems","_item$price2","fullWidth","position","left","bottom","zIndex"],"sources":["E:/food-ordering-website/client/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Paper,\r\n} from '@mui/material';\r\nimport { useMenu } from '../context/MenuContext';\r\nimport { useCart } from '../context/CartContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { debounce } from 'lodash';\r\n\r\nconst Home = () => {\r\n  const { menuItems, categories, getItemsForCategory, menuItemCategories, menuItemSubcategories, categorySubcategoryLinks } = useMenu();\r\n  const { cart, addToCart, updateQuantity, removeFromCart } = useCart();\r\n  const [selectedCategory, setSelectedCategory] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Only show categories (type === 'category')\r\n  const mainCategories = categories.filter(cat => cat.type === 'category');\r\n\r\n  useEffect(() => {\r\n    if (mainCategories.length > 0 && !selectedCategory) {\r\n      setSelectedCategory(mainCategories[0].id);\r\n    }\r\n  }, [mainCategories, selectedCategory]);\r\n\r\n  // Get items for selected category using join table\r\n  const items = selectedCategory ? getItemsForCategory(selectedCategory) : [];\r\n\r\n  // Get subcategories for the selected category using the join table from context\r\n  const categorySubcategoryIds = categorySubcategoryLinks\r\n    .filter(link => String(link.category_id) === String(selectedCategory))\r\n    .map(link => link.subcategory_id);\r\n  const categorySubcategories = categories\r\n    .filter(cat => cat.type === 'subcategory' && categorySubcategoryIds.includes(cat.id))\r\n    .sort((a, b) => (a.sort_order ?? 0) - (b.sort_order ?? 0));\r\n\r\n  // Group items by subcategory (support multiple subcategories per item)\r\n  const itemsBySubcategory = {};\r\n  const subcategoryIdToName = {};\r\n  categorySubcategories.forEach(sub => {\r\n    subcategoryIdToName[sub.id] = sub.name;\r\n  });\r\n  items.forEach(item => {\r\n    // Find all subcategory links for this item that belong to the current category's subcategories\r\n    const subLinks = menuItemSubcategories.filter(link => link.menu_item_id === item.id && categorySubcategories.some(sub => sub.id === link.subcategory_id));\r\n    if (subLinks.length > 0) {\r\n      subLinks.forEach(link => {\r\n        const subName = subcategoryIdToName[link.subcategory_id];\r\n        if (!itemsBySubcategory[subName]) itemsBySubcategory[subName] = [];\r\n        // Avoid duplicates\r\n        if (!itemsBySubcategory[subName].some(i => i.id === item.id)) {\r\n          itemsBySubcategory[subName].push(item);\r\n        }\r\n      });\r\n    } else {\r\n      // No subcategory for this category, put in 'Other'\r\n      if (!itemsBySubcategory['Other']) itemsBySubcategory['Other'] = [];\r\n      itemsBySubcategory['Other'].push(item);\r\n    }\r\n  });\r\n\r\n  const debouncedSearch = debounce((query) => { /* fetch from DB */ }, 300);\r\n\r\n  // Debug output\r\n  const menuItemIds = menuItemCategories\r\n    .filter(link => String(link.category_id) === String(selectedCategory))\r\n    .map(link => String(link.menu_item_id));\r\n  console.log('selectedCategory:', selectedCategory);\r\n  console.log('menuItemCategories:', menuItemCategories);\r\n  console.log('menuItemIds:', menuItemIds);\r\n  console.log('items:', items);\r\n  console.log('menuItems:', menuItems);\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\" sx={{ pb: 10 }}>\r\n      {mainCategories.length === 0 || !selectedCategory ? (\r\n        <Typography align=\"center\" color=\"text.secondary\" sx={{ mt: 4 }}>\r\n          No categories found.\r\n        </Typography>\r\n      ) : (\r\n        <>\r\n          {/* Category Tabs */}\r\n          <Tabs\r\n            value={selectedCategory}\r\n            onChange={(e, val) => setSelectedCategory(val)}\r\n            variant=\"scrollable\"\r\n            scrollButtons=\"auto\"\r\n            sx={{ mb: 2 }}\r\n          >\r\n            {mainCategories.map(cat => (\r\n              <Tab key={cat.id} label={cat.name} value={cat.id} />\r\n            ))}\r\n          </Tabs>\r\n\r\n          {/* Menu Items */}\r\n          {items.length === 0 ? (\r\n            <Typography align=\"center\" color=\"text.secondary\" sx={{ mt: 4 }}>\r\n              No items found for this category.\r\n            </Typography>\r\n          ) : (\r\n            <>\r\n              {categorySubcategories.map(subcategory => {\r\n                const subcategoryItems = itemsBySubcategory[subcategory.name] || [];\r\n                if (subcategoryItems.length === 0) return null;\r\n                return (\r\n                  <Box key={subcategory.name} sx={{ mb: 4 }}>\r\n                    <Typography variant=\"h6\" sx={{ fontWeight: 600, mb: 2, color: 'primary.main' }}>\r\n                      {subcategory.name}\r\n                    </Typography>\r\n                    {subcategoryItems.map(item => {\r\n                      const cartItem = cart.find(ci => ci.id === item.id);\r\n                      return (\r\n                        <Paper key={item.id} sx={{ display: 'flex', alignItems: 'center', mb: 2, p: 2 }}>\r\n                          <Box sx={{ flex: 1 }}>\r\n                            <Typography variant=\"h6\" sx={{ fontWeight: 700 }}>{item.name}</Typography>\r\n                            <Typography variant=\"body1\" sx={{ fontWeight: 600 }}>\r\n                              £{item.price?.toFixed(2)}\r\n                            </Typography>\r\n                            <Typography variant=\"body2\" color=\"text.secondary\" noWrap>\r\n                              {item.description}\r\n                            </Typography>\r\n                          </Box>\r\n                          <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', ml: 2 }}>\r\n                            {item.image_url && (\r\n                              <Box\r\n                                component=\"img\"\r\n                                src={item.image_url}\r\n                                alt={item.name}\r\n                                sx={{ width: 90, height: 90, objectFit: 'cover', borderRadius: 2, mb: 1 }}\r\n                              />\r\n                            )}\r\n                            {cartItem && cartItem.quantity > 0 ? (\r\n                              <Box sx={{ display: 'flex', alignItems: 'center', mt: 1 }}>\r\n                                <Button\r\n                                  size=\"small\"\r\n                                  variant=\"outlined\"\r\n                                  sx={{ minWidth: 32, px: 0 }}\r\n                                  onClick={() => {\r\n                                    if (cartItem.quantity === 1) {\r\n                                      removeFromCart(item.id);\r\n                                    } else {\r\n                                      updateQuantity(item.id, cartItem.quantity - 1);\r\n                                    }\r\n                                  }}\r\n                                >\r\n                                  -\r\n                                </Button>\r\n                                <Typography sx={{ mx: 1, minWidth: 20, textAlign: 'center' }}>{cartItem.quantity}</Typography>\r\n                                <Button\r\n                                  size=\"small\"\r\n                                  variant=\"outlined\"\r\n                                  sx={{ minWidth: 32, px: 0 }}\r\n                                  onClick={() => updateQuantity(item.id, cartItem.quantity + 1)}\r\n                                >\r\n                                  +\r\n                                </Button>\r\n                              </Box>\r\n                            ) : (\r\n                              <Button\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                sx={{ mt: 1, fontSize: '0.8rem', px: 2, py: 0.5 }}\r\n                                onClick={() => addToCart(item)}\r\n                              >\r\n                                Add to Cart\r\n                              </Button>\r\n                            )}\r\n                          </Box>\r\n                        </Paper>\r\n                      );\r\n                    })}\r\n                  </Box>\r\n                );\r\n              })}\r\n              {(() => {\r\n                const otherItems = itemsBySubcategory['Other'] || [];\r\n                if (otherItems.length === 0) return null;\r\n                return (\r\n                  <Box sx={{ mb: 4 }}>\r\n                    <Typography variant=\"h6\" sx={{ fontWeight: 600, mb: 2, color: 'primary.main' }}>\r\n                      Other\r\n                    </Typography>\r\n                    {otherItems.map(item => {\r\n                      const cartItem = cart.find(ci => ci.id === item.id);\r\n                      return (\r\n                        <Paper key={item.id} sx={{ display: 'flex', alignItems: 'center', mb: 2, p: 2 }}>\r\n                          <Box sx={{ flex: 1 }}>\r\n                            <Typography variant=\"h6\" sx={{ fontWeight: 700 }}>{item.name}</Typography>\r\n                            <Typography variant=\"body1\" sx={{ fontWeight: 600 }}>\r\n                              £{item.price?.toFixed(2)}\r\n                            </Typography>\r\n                            <Typography variant=\"body2\" color=\"text.secondary\" noWrap>\r\n                              {item.description}\r\n                            </Typography>\r\n                          </Box>\r\n                          <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', ml: 2 }}>\r\n                            {item.image_url && (\r\n                              <Box\r\n                                component=\"img\"\r\n                                src={item.image_url}\r\n                                alt={item.name}\r\n                                sx={{ width: 90, height: 90, objectFit: 'cover', borderRadius: 2, mb: 1 }}\r\n                              />\r\n                            )}\r\n                            {cartItem && cartItem.quantity > 0 ? (\r\n                              <Box sx={{ display: 'flex', alignItems: 'center', mt: 1 }}>\r\n                                <Button\r\n                                  size=\"small\"\r\n                                  variant=\"outlined\"\r\n                                  sx={{ minWidth: 32, px: 0 }}\r\n                                  onClick={() => {\r\n                                    if (cartItem.quantity === 1) {\r\n                                      removeFromCart(item.id);\r\n                                    } else {\r\n                                      updateQuantity(item.id, cartItem.quantity - 1);\r\n                                    }\r\n                                  }}\r\n                                >\r\n                                  -\r\n                                </Button>\r\n                                <Typography sx={{ mx: 1, minWidth: 20, textAlign: 'center' }}>{cartItem.quantity}</Typography>\r\n                                <Button\r\n                                  size=\"small\"\r\n                                  variant=\"outlined\"\r\n                                  sx={{ minWidth: 32, px: 0 }}\r\n                                  onClick={() => updateQuantity(item.id, cartItem.quantity + 1)}\r\n                                >\r\n                                  +\r\n                                </Button>\r\n                              </Box>\r\n                            ) : (\r\n                              <Button\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                sx={{ mt: 1, fontSize: '0.8rem', px: 2, py: 0.5 }}\r\n                                onClick={() => addToCart(item)}\r\n                              >\r\n                                Add to Cart\r\n                              </Button>\r\n                            )}\r\n                          </Box>\r\n                        </Paper>\r\n                      );\r\n                    })}\r\n                  </Box>\r\n                );\r\n              })()}\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n      {/* Go to Basket Button */}\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        fullWidth\r\n        sx={{\r\n          position: 'fixed',\r\n          left: 0,\r\n          bottom: 0,\r\n          width: '100vw',\r\n          borderRadius: 0,\r\n          py: 2,\r\n          zIndex: 1200,\r\n        }}\r\n        onClick={() => navigate('/cart')}\r\n      >\r\n        Go to Basket\r\n      </Button>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Home; \r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}