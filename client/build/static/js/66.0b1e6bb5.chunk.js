"use strict";(self.webpackChunkfood_ordering_client=self.webpackChunkfood_ordering_client||[]).push([[66],{8446:(e,n,t)=>{t.d(n,{A:()=>j});var o=t(8587),r=t(8168),a=t(5043),i=t(8387),s=t(8610),l=t(6803),c=t(4535),u=t(8206),d=t(3574),m=t(5849),p=t(5865),h=t(2532),g=t(2372);function A(e){return(0,g.Ay)("MuiLink",e)}const b=(0,h.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var f=t(7162),x=t(7266);const v={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},y=e=>{let{theme:n,ownerState:t}=e;const o=(e=>v[e]||e)(t.color),r=(0,f.Yn)(n,"palette.".concat(o),!1)||t.color,a=(0,f.Yn)(n,"palette.".concat(o,"Channel"));return"vars"in n&&a?"rgba(".concat(a," / 0.4)"):(0,x.X4)(r,.4)};var w=t(579);const S=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],C=(0,c.Ay)(p.A,{name:"MuiLink",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,n["underline".concat((0,l.A)(t.underline))],"button"===t.component&&n.button]}})((e=>{let{theme:n,ownerState:t}=e;return(0,r.A)({},"none"===t.underline&&{textDecoration:"none"},"hover"===t.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===t.underline&&(0,r.A)({textDecoration:"underline"},"inherit"!==t.color&&{textDecorationColor:y({theme:n,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===t.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(b.focusVisible)]:{outline:"auto"}})})),j=a.forwardRef((function(e,n){const t=(0,u.b)({props:e,name:"MuiLink"}),{className:c,color:p="primary",component:h="a",onBlur:g,onFocus:b,TypographyClasses:f,underline:x="always",variant:y="inherit",sx:j}=t,k=(0,o.A)(t,S),{isFocusVisibleRef:D,onBlur:L,onFocus:N,ref:R}=(0,d.A)(),[W,F]=a.useState(!1),T=(0,m.A)(n,R),V=(0,r.A)({},t,{color:p,component:h,focusVisible:W,underline:x,variant:y}),B=(e=>{const{classes:n,component:t,focusVisible:o,underline:r}=e,a={root:["root","underline".concat((0,l.A)(r)),"button"===t&&"button",o&&"focusVisible"]};return(0,s.A)(a,A,n)})(V);return(0,w.jsx)(C,(0,r.A)({color:p,className:(0,i.A)(B.root,c),classes:f,component:h,onBlur:e=>{L(e),!1===D.current&&F(!1),g&&g(e)},onFocus:e=>{N(e),!0===D.current&&F(!0),b&&b(e)},ref:T,ownerState:V,variant:y,sx:[...Object.keys(v).includes(p)?[]:[{color:p}],...Array.isArray(j)?j:[j]]},k))}))},9066:(e,n,t)=>{t.r(n),t.d(n,{default:()=>g});var o=t(5043),r=t(9252),a=t(5865),i=t(6446),s=t(547),l=t(5795),c=t(1906),u=t(8446),d=t(3216),m=t(5475),p=t(9669),h=(t(5169),t(579));const g=()=>{const[e,n]=(0,o.useState)(""),[t,g]=(0,o.useState)(""),[A,b]=(0,o.useState)(""),[f,x]=(0,o.useState)(""),[v,y]=(0,o.useState)(!1),w=(0,d.Zp)();return(0,h.jsxs)(r.A,{maxWidth:"sm",sx:{mt:8},children:[(0,h.jsx)(a.A,{variant:"h4",component:"h1",align:"center",gutterBottom:!0,children:"Login"}),(0,h.jsxs)(i.A,{component:"form",sx:{mt:3},onSubmit:async n=>{if(n.preventDefault(),b(""),x(""),!e||!t)return void b("Please enter both email and password.");y(!0);const{error:o}=await p.N.auth.signInWithPassword({email:e,password:t});if(o)b(o.message),y(!1);else{const{data:{user:e}}=await p.N.auth.getUser();if(e){const{data:n,error:t}=await p.N.from("profiles").select("role").eq("id",e.id).single();!t&&n&&"admin"===n.role?(x("Login successful! Redirecting to admin dashboard..."),setTimeout((()=>w("/admin")),1e3)):(x("Login successful! Redirecting..."),setTimeout((()=>w("/")),1e3))}else x("Login successful! Redirecting..."),setTimeout((()=>w("/")),1e3);y(!1)}},children:[A&&(0,h.jsx)(s.A,{severity:"error",children:A}),f&&(0,h.jsx)(s.A,{severity:"success",children:f}),(0,h.jsx)(l.A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e,onChange:e=>n(e.target.value)}),(0,h.jsx)(l.A,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:t,onChange:e=>g(e.target.value)}),(0,h.jsx)(c.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:v,children:v?"Signing In...":"Sign In"}),(0,h.jsx)(i.A,{sx:{textAlign:"center"},children:(0,h.jsx)(u.A,{component:m.N_,to:"/register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})}}}]);
//# sourceMappingURL=66.0b1e6bb5.chunk.js.map