"use strict";(self.webpackChunkfood_ordering_client=self.webpackChunkfood_ordering_client||[]).push([[936],{9936:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var n=i(5043),r=i(9252),s=i(5865),o=i(4669),l=i(4056),a=i(6446),d=i(3336),c=i(1906),m=i(9150),x=i(5169),h=i(3216),u=i(3536),g=i(579);const p=()=>{const{menuItems:e,categories:t,getItemsForCategory:i,menuItemCategories:p,menuItemSubcategories:y,categorySubcategoryLinks:f}=(0,m.b)(),{cart:j,addToCart:A,updateQuantity:b,removeFromCart:v}=(0,x._)(),[_,C]=(0,n.useState)(null),W=(0,h.Zp)(),I=t.filter((e=>"category"===e.type));(0,n.useEffect)((()=>{I.length>0&&!_&&C(I[0].id)}),[I,_]);const k=_?i(_):[],q=f.filter((e=>String(e.category_id)===String(_))).map((e=>e.subcategory_id)),S=t.filter((e=>"subcategory"===e.type&&q.includes(e.id))).sort(((e,t)=>{var i,n;return(null!==(i=e.sort_order)&&void 0!==i?i:0)-(null!==(n=t.sort_order)&&void 0!==n?n:0)})),F={},z={};S.forEach((e=>{z[e.id]=e.name})),k.forEach((e=>{const t=y.filter((t=>t.menu_item_id===e.id&&S.some((e=>e.id===t.subcategory_id))));t.length>0?t.forEach((t=>{const i=z[t.subcategory_id];F[i]||(F[i]=[]),F[i].some((t=>t.id===e.id))||F[i].push(e)})):(F.Other||(F.Other=[]),F.Other.push(e))}));(0,u.debounce)((e=>{}),300);const w=p.filter((e=>String(e.category_id)===String(_))).map((e=>String(e.menu_item_id)));return console.log("selectedCategory:",_),console.log("menuItemCategories:",p),console.log("menuItemIds:",w),console.log("items:",k),console.log("menuItems:",e),(0,g.jsxs)(r.A,{maxWidth:"sm",sx:{pb:10},children:[0!==I.length&&_?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.A,{value:_,onChange:(e,t)=>C(t),variant:"scrollable",scrollButtons:"auto",sx:{mb:2},children:I.map((e=>(0,g.jsx)(l.A,{label:e.name,value:e.id},e.id)))}),0===k.length?(0,g.jsx)(s.A,{align:"center",color:"text.secondary",sx:{mt:4},children:"No items found for this category."}):(0,g.jsxs)(g.Fragment,{children:[S.map((e=>{const t=F[e.name]||[];return 0===t.length?null:(0,g.jsxs)(a.A,{sx:{mb:4},children:[(0,g.jsx)(s.A,{variant:"h6",sx:{fontWeight:600,mb:2,color:"primary.main"},children:e.name}),t.map((e=>{var t;const i=j.find((t=>t.id===e.id));return(0,g.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",mb:2,p:2},children:[(0,g.jsxs)(a.A,{sx:{flex:1},children:[(0,g.jsx)(s.A,{variant:"h6",sx:{fontWeight:700},children:e.name}),(0,g.jsxs)(s.A,{variant:"body1",sx:{fontWeight:600},children:["\xa3",null===(t=e.price)||void 0===t?void 0:t.toFixed(2)]}),(0,g.jsx)(s.A,{variant:"body2",color:"text.secondary",noWrap:!0,children:e.description})]}),(0,g.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",ml:2},children:[e.image_url&&(0,g.jsx)(a.A,{component:"img",src:e.image_url,alt:e.name,sx:{width:90,height:90,objectFit:"cover",borderRadius:2,mb:1}}),i&&i.quantity>0?(0,g.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,g.jsx)(c.A,{size:"small",variant:"outlined",sx:{minWidth:32,px:0},onClick:()=>{1===i.quantity?v(e.id):b(e.id,i.quantity-1)},children:"-"}),(0,g.jsx)(s.A,{sx:{mx:1,minWidth:20,textAlign:"center"},children:i.quantity}),(0,g.jsx)(c.A,{size:"small",variant:"outlined",sx:{minWidth:32,px:0},onClick:()=>b(e.id,i.quantity+1),children:"+"})]}):(0,g.jsx)(c.A,{variant:"contained",color:"primary",sx:{mt:1,fontSize:"0.8rem",px:2,py:.5},onClick:()=>A(e),children:"Add to Cart"})]})]},e.id)}))]},e.name)})),(()=>{const e=F.Other||[];return 0===e.length?null:(0,g.jsxs)(a.A,{sx:{mb:4},children:[(0,g.jsx)(s.A,{variant:"h6",sx:{fontWeight:600,mb:2,color:"primary.main"},children:"Other"}),e.map((e=>{var t;const i=j.find((t=>t.id===e.id));return(0,g.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",mb:2,p:2},children:[(0,g.jsxs)(a.A,{sx:{flex:1},children:[(0,g.jsx)(s.A,{variant:"h6",sx:{fontWeight:700},children:e.name}),(0,g.jsxs)(s.A,{variant:"body1",sx:{fontWeight:600},children:["\xa3",null===(t=e.price)||void 0===t?void 0:t.toFixed(2)]}),(0,g.jsx)(s.A,{variant:"body2",color:"text.secondary",noWrap:!0,children:e.description})]}),(0,g.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",ml:2},children:[e.image_url&&(0,g.jsx)(a.A,{component:"img",src:e.image_url,alt:e.name,sx:{width:90,height:90,objectFit:"cover",borderRadius:2,mb:1}}),i&&i.quantity>0?(0,g.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,g.jsx)(c.A,{size:"small",variant:"outlined",sx:{minWidth:32,px:0},onClick:()=>{1===i.quantity?v(e.id):b(e.id,i.quantity-1)},children:"-"}),(0,g.jsx)(s.A,{sx:{mx:1,minWidth:20,textAlign:"center"},children:i.quantity}),(0,g.jsx)(c.A,{size:"small",variant:"outlined",sx:{minWidth:32,px:0},onClick:()=>b(e.id,i.quantity+1),children:"+"})]}):(0,g.jsx)(c.A,{variant:"contained",color:"primary",sx:{mt:1,fontSize:"0.8rem",px:2,py:.5},onClick:()=>A(e),children:"Add to Cart"})]})]},e.id)}))]})})()]})]}):(0,g.jsx)(s.A,{align:"center",color:"text.secondary",sx:{mt:4},children:"No categories found."}),(0,g.jsx)(c.A,{variant:"contained",color:"primary",fullWidth:!0,sx:{position:"fixed",left:0,bottom:0,width:"100vw",borderRadius:0,py:2,zIndex:1200},onClick:()=>W("/cart"),children:"Go to Basket"})]})}}}]);
//# sourceMappingURL=936.3ef9b09d.chunk.js.map